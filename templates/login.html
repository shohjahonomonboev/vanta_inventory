<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <title>Vanta Inventory System — Admin Login</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ APP_VERSION }}">
</head>
<body>
  <div class="login-box {% if error %}shake error{% endif %}">
    <h2>
      Admin Login
      <span class="info-icon-title" title="Admins only. Unauthorized access prohibited." style="display:inline-grid;place-items:center;width:16px;height:16px;border-radius:999px;background:#9aa2b6;color:#fff;font-weight:700;font-size:12px;cursor:help;">i</span>
    </h2>

    {% if error %}
      <div class="error-message">{{ error }}</div>
    {% endif %}

    <form method="POST" class="login-form" novalidate>
  <!-- Username -->
  <div class="input-group">
    <input type="text" name="username" id="username" placeholder="Username" required autocomplete="username" />
    <!-- trailing icon -->
    <span class="icon" aria-hidden="true">
      <!-- user svg -->
      <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
        <path d="M12 12c2.761 0 5-2.686 5-6s-2.239-6-5-6-5 2.686-5 6 2.239 6 5 6zm0 2c-4.418 0-8 2.91-8 6.5V22h16v-1.5C20 16.91 16.418 14 12 14z"/>
      </svg>
    </span>
  </div>

  <!-- Password -->
  <div class="input-group">
    <input type="password" name="password" id="password" placeholder="Password" required autocomplete="current-password" />
    <!-- eye toggle button at the very end -->
    <button type="button"
            class="icon icon-button"
            id="pwdToggle"
            aria-label="Show password"
            aria-pressed="false"
            title="Show password">
      <!-- eye (shown by default) -->
      <svg class="eye-on" viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
        <path d="M12 5c-5.5 0-9.5 4.1-11 7 1.5 2.9 5.5 7 11 7s9.5-4.1 11-7c-1.5-2.9-5.5-7-11-7zm0 12a5 5 0 110-10 5 5 0 010 10zm0-2.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/>
      </svg>
      <!-- eye-off (hidden initially) -->
      <svg class="eye-off" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="display:none">
        <path d="M2.3 1.7l20 20-1.6 1.6-3-3A13.8 13.8 0 0112 19c-5.5 0-9.5-4.1-11-7 1-1.9 2.7-4 5-5.5L.7 3.3 2.3 1.7zM8.6 8.7L10 10a2.5 2.5 0 003.5 3.5l1.3 1.3A5 5 0 018.6 8.7zm13.4 3.3c-.7 1.4-1.8 2.8-3.2 4l-2.3-2.3a5 5 0 00-6.2-6.2l-2-2A13.6 13.6 0 0112 5c5.5 0 9.5 4.1 11 7z"/>
      </svg>
    </button>
  </div>

  <div class="forgot">
    <a href="#">Forgot Password?</a>
  </div>

  <button type="submit" class="btn">Login</button>
  <p class="version">Version: {{ APP_VERSION }}</p>
</form>
  </div>

  <script>
  (function(){
    const pwd = document.getElementById('password');
    const btn = document.getElementById('pwdToggle');
    if(!pwd || !btn) return;

    const eyeOn  = btn.querySelector('.eye-on');
    const eyeOff = btn.querySelector('.eye-off');

    btn.addEventListener('click', () => {
      const show = pwd.type === 'password';
      pwd.type = show ? 'text' : 'password';
      btn.setAttribute('aria-pressed', String(show));
      btn.setAttribute('aria-label', show ? 'Hide password' : 'Show password');
      btn.title = show ? 'Hide password' : 'Show password';
      eyeOn.style.display  = show ? 'none' : '';
      eyeOff.style.display = show ? '' : 'none';
      try { pwd.focus(); } catch(_) {}
    });
  })();
</script>

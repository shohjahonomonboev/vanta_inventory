<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Login — Vanta</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ APP_VERSION }}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="login-wrap">

  <div class="login-card">
    <h1 class="login-title">
      Admin Login
      <span class="info-dot" title="Admins only" aria-hidden="true">i</span>
    </h1>

    {% if error %}
      <div class="flash error">{{ error }}</div>
    {% endif %}

    <form method="POST" class="stack" autocomplete="on" novalidate>
      <!-- Username -->
      <div class="field">
        <div class="deco"><span class="emoji" aria-hidden="true">👤</span></div>
        <label class="sr-only" for="username">Username</label>
        <input id="username" type="text" name="username" placeholder="Username" required
               autocomplete="username" autofocus />
      </div>

      <!-- Password -->
      <div class="field">
        <div class="deco"><span class="emoji" aria-hidden="true">🔒</span></div>
        <label class="sr-only" for="pwd">Password</label>
        <input id="pwd" type="password" name="password" placeholder="Password" required
               autocomplete="current-password" />
        <div class="eye-row">
          <span class="muted small" aria-hidden="true">i</span>
          <button class="btn-eye" type="button" aria-label="Show password" aria-pressed="false" title="Show/Hide password">
            <i class="fa-solid fa-eye-slash" aria-hidden="true"></i>
          </button>
        </div>
      </div>

      <div class="forgot-line">
        <a href="#">{{ t('forgot_password') if t('forgot_password') else 'Forgot Password?' }}</a>
      </div>

      <button class="login-btn" type="submit" id="loginBtn">Login</button>

      <div class="version-line small">Version: {{ APP_VERSION }}</div>
    </form>
  </div>

  <script>
    // Password eye toggle (kept simple & stable)
    (function(){
      const btn = document.querySelector('.btn-eye');
      const pwd = document.getElementById('pwd');
      if(!btn || !pwd) return;
      btn.addEventListener('click', () => {
        const icon = btn.querySelector('i');
        const show = pwd.type === 'password';
        pwd.type = show ? 'text' : 'password';
        icon.classList.toggle('fa-eye', show);
        icon.classList.toggle('fa-eye-slash', !show);
        btn.setAttribute('aria-pressed', String(show));
        btn.setAttribute('aria-label', show ? 'Hide password' : 'Show password');
        btn.title = show ? 'Hide password' : 'Show password';
      });
    })();
  </script>
</body>
</html>
